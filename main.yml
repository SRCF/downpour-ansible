---
- name: Mattermost
  hosts: downpour
  become: yes
  tags:
    - mattermost
  vars:
    - domain: mattermost.srcf.net
    - certbot_email: soc-srcf-admin@lists.cam.ac.uk
    - mattermost_version: 5.25.0
    - mattermost_checksum: sha256:4d8053508108a2f2d33a4bfaadb821f34c20694905b14ab747a08f91fb17f801
    - mattermost_bbb_plugin_version: 2.1.0
    - mattermost_bbb_plugin_checksum: sha256:2a8b14bb22d44c4039c772b852f5499c1902f3ff6e11eb4dbd583528b5ba3e2e
    - mattermost_admin_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39643061306665306661386335376233613761653462623565653461343039616134643466616363
          3037613635643235653966373639333933303366393233640a613130356464316331643233633637
          61393130373632323462356238383563363731313039303039633636353030376131353636613136
          6638393364613762650a623263356630616331623639636138626462353634396662633163323561
          6133

    - bbb_secret: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33663363643735663032643066636566653866666338326562643531306230643262666334336364
          3963346164386139656533323434666439663230646332350a316339636331663333363865303830
          65303366666366353066333461326138333732613039396238383862386637663361323235653234
          3036616438656137330a663837336637613562633333653264396166643232666432653233663234
          32633330643630393339656361306662633932613336636166656638366233323037613630376262
          62633466306336626363636532663531666162626361366230316261386366386636383064666137
          35646461303034386336643731653935656534366566396338626264636336386433373634363332
          38363966373865656530

  roles:
    - certbot
    - mattermost
